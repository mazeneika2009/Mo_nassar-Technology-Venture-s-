<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Mo_nassar (Technology Venture‚Äôs)</title>
   <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    :root {
        --bg-body: #f9fafb;
        --bg-card: #ffffff;
        --text-main: #333333;
        --text-heading: #1f2937;
        --text-secondary: #666666;
        --border-color: #e5e7eb;
        --primary-color: #0ea5e9;
        --primary-hover: #0284c7;
        --sidebar-bg: #ffffff;
    }

    [data-theme="dark"] {
        --bg-body: #111827;
        --bg-card: #1f2937;
        --text-main: #e5e7eb;
        --text-heading: #f9fafb;
        --text-secondary: #9ca3af;
        --border-color: #374151;
        --primary-color: #38bdf8;
        --primary-hover: #0ea5e9;
        --sidebar-bg: #1f2937;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        line-height: 1.6;
        color: var(--text-main);
        background-color: var(--bg-body);
        transition: background-color 0.3s, color 0.3s;
    }

    header {
        background-color: var(--bg-card);
        border-bottom: 1px solid var(--border-color);
        padding: 20px 0;
        position: sticky;
        top: 0;
        z-index: 100;
        transition: background-color 0.3s;
    }

    .header-content {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
    }

    .logo {
        font-size: 24px;
        font-weight: 700;
        color: var(--primary-color);
        z-index: 101;
    }

    nav {
        display: flex;
        gap: 30px;
    }

    nav a {
        text-decoration: none;
        color: var(--text-secondary);
        font-size: 14px;
        font-weight: 500;
        transition: color 0.3s;
    }

    nav a:hover {
        color: var(--primary-color);
    }

    .mobile-menu-btn {
        display: none;
        background: none;
        border: none;
        cursor: pointer;
        z-index: 101;
        padding: 10px;
    }

    .mobile-menu-btn span {
        display: block;
        width: 25px;
        height: 3px;
        background-color: var(--text-main);
        margin: 5px 0;
        transition: all 0.3s;
    }

    .user-profile {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .avatar {
        width: 40px;
        height: 40px;
        background: linear-gradient(135deg, #0ea5e9 0%, #06b6d4 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
        font-size: 14px;
        cursor: pointer;
    }

    .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 40px 20px;
    }

    .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin-bottom: 30px;
    }

    .content-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 30px;
    }

    /* Responsive Design */

    /* Mobile */
    @media (max-width: 768px) {
        header {
            padding: 15px 0;
        }

        .header-content {
            padding: 0 10px;
        }

        .logo {
            font-size: 20px;
        }

        nav {
            display: flex;
            flex-direction: column;
            gap: 15px;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background-color: var(--bg-card);
            justify-content: center;
            align-items: center;
            transform: translateX(100%);
            transition: transform 0.3s ease-in-out;
            z-index: 100;
        }

        nav.active {
            transform: translateX(0);
        }

        .mobile-menu-btn {
            display: block;
        }

        /* Hamburger Menu Animation */
        .mobile-menu-btn.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .mobile-menu-btn.active span:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        .dashboard-grid {
            grid-template-columns: 1fr;
        }

        .content-grid {
            grid-template-columns: 1fr;
        }

        .welcome-section h1 {
            font-size: 28px;
        }

        .welcome-section {
            padding: 20px;
        }

        .user-profile {
            gap: 10px;
        }

        .user-profile span {
            display: none;
        }

        .logo {
            font-size: 18px;
            max-width: 180px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .card h3 {
            font-size: 12px;
        }

        .card-value {
            font-size: 24px;
        }

        .card-detail {
            font-size: 12px;
        }

        .section-title {
            font-size: 18px;
            margin-bottom: 20px;
        }

        .content-grid {
            grid-template-columns: 1fr;
        }

        .empty-state-text {
            font-size: 12px;
        }

        .action-buttons {
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            font-size: 12px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #0ea5e9 0%, #06b6d4 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(14, 165, 233, 0.4);
        }

        .btn-secondary {
            background-color: var(--bg-body);
            color: var(--text-main);
        }

        .btn-secondary:hover {
            opacity: 0.8;
        }

        .modal-content {
            max-width: 90%;
        }

        /* RTL Support */
        [dir="rtl"] {
            text-align: right;
        }

        [dir="rtl"] .card.success, [dir="rtl"] .card.primary, [dir="rtl"] .card.warning {
            border-left: none;
            border-right: 4px solid;
        }

        [dir="rtl"] .team-avatar {
            margin-right: 0;
            margin-left: 12px;
        }

        [dir="rtl"] .detail-row {
            grid-template-columns: 1fr 150px;
        }
    }

    @media (max-width: 1024px) {
        .dashboard-grid {
            grid-template-columns: 1fr 1fr;
        }

        .content-grid {
            grid-template-columns: 1fr;
        }

        .card {
            padding: 15px;
        }

        .card h3 {
            font-size: 12px;
        }

        .card-value {
            font-size: 24px;
        }

        .card-detail {
            font-size: 12px;
        }
    }

</style>

</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-content">
            <div class="logo" data-i18n="brandName">Mo_nassar (Technology Venture‚Äôs)</div>
            <div class="controls">
                <button type="button" class="btn-icon" onclick="toggleTheme()" id="themeBtn">üåô</button>
                <button type="button" class="btn-icon" onclick="toggleLanguage()" id="langBtn">ÿπÿ±ÿ®Ÿä</button>
            </div>
            <button class="mobile-menu-btn" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <nav>
                <a href="add-project.html" data-i18n="navProjects">Projects</a>
                <a href="#teamMembersList" data-i18n="navTeam">Team</a>
                <a href="account.html" data-i18n="navSettings">Settings</a>
                <a href="help.html" data-i18n="navHelp">Help</a>
            </nav>
            <div class="user-profile" onclick="navigateTo('account.html')" style="cursor: pointer;">
                <span id="userNameDisplay">User</span>
                <div class="avatar" id="userInitials">U</div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <!-- Welcome Section -->
        <div class="welcome-section">
            <h1 data-i18n="welcomeTitle">Welcome to Mo_nassar! üéâ</h1>
            <p data-i18n="welcomeText">Your workspace is all set up and ready to go. Start managing your projects with ease.</p>
        </div>

        <div class="completion-badge" data-i18n="setupComplete">‚úì Setup Complete - All 4 Steps Finished</div>

        <!-- Stats Cards -->
        <div class="dashboard-grid">
            <div class="card success">
                <h3 data-i18n="cardStatus">Account Status</h3>
                <div class="card-value" data-i18n="statusActive">Active</div>
                <div class="card-detail" data-i18n="statusDetail">Ready to collaborate</div>
                <div class="card-icon">‚úì</div>
            </div>
            <div class="card primary">
                <h3 data-i18n="cardProject">Project</h3>
                <div class="card-value" id="projectCount" data-i18n="projectCount">1</div>
                <div class="card-detail" id="projectName" data-i18n="projectDetail">Created successfully</div>
                <div class="card-icon">üìä</div>
            </div>
            <div class="card warning">
                <h3 data-i18n="cardTeam">Team Members</h3>
                <div class="card-value" id="teamCount" data-i18n="teamCount">1</div>
                <div class="card-detail" data-i18n="teamDetail">Ready to invite more</div>
                <div class="card-icon">üë•</div>
            </div>
        </div>

        <!-- Content Grid -->
        <div class="content-grid">
            <!-- Project Info -->
            <div class="project-info">
                <h3 class="section-title">
                    <span>üìã</span> <span data-i18n="projectInfoTitle">Project Information</span>
                </h3>
                <div class="info-row">
                    <span class="info-label" data-i18n="labelProjectName">Project Name</span>
                    <span class="info-value" id="displayProjectName">-</span>
                </div>
                <div class="info-row">
                    <span class="info-label" data-i18n="labelCategory">Category</span>
                    <span class="info-value" id="displayCategory">-</span>
                </div>
                <div class="info-row">
                    <span class="info-label" data-i18n="labelTemplate">Template</span>
                    <span class="info-value" id="displayTemplate">-</span>
                </div>
                <div class="info-row">
                    <span class="info-label" data-i18n="labelPrivacy">Privacy Level</span>
                    <span class="info-value" id="displayPrivacy">-</span>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="editProject()" data-i18n="btnEditProject">Edit Project</button>
                    <button class="btn btn-secondary" onclick="viewProjectDetails()" data-i18n="btnViewDetails">View Details</button>
                </div>
            </div>

            <!-- Team Section -->
            <div class="team-section">
                <h3 class="section-title">
                    <span>üë•</span> <span data-i18n="teamMembersTitle">Team Members</span>
                </h3>
                <div id="teamMembersList">
                    <div class="empty-state">
                        <div class="empty-state-icon">üòä</div>
                        <div class="empty-state-text" data-i18n="noTeamMembers">No team members invited yet</div>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="navigateTo('invite-team.html')" data-i18n="btnManageTeam">Manage Team</button>
                    <button class="btn btn-secondary" onclick="navigateTo('invite-team.html')" data-i18n="btnInviteMembers">Invite Members</button>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <h3 class="section-title">
                <span>‚ö°</span> <span data-i18n="quickActionsTitle">Quick Actions</span>
            </h3>
            <div class="action-grid">
                <div class="action-btn" onclick="navigateTo('add-project.html')">
                    <div class="action-btn-icon">‚ûï</div>
                    <div class="action-btn-text" data-i18n="actionCreateProject">Create New Project</div>
                </div>
                <div class="action-btn" onclick="navigateTo('add-tasks.html')">
                    <div class="action-btn-icon">üìù</div>
                    <div class="action-btn-text" data-i18n="actionAddTasks">Add Tasks</div>
                </div>
                <div class="action-btn" onclick="navigateTo('invite-team.html')">
                    <div class="action-btn-icon">üë§</div>
                    <div class="action-btn-text" data-i18n="actionManageTeam">Manage Team</div>
                </div>
                <div class="action-btn" onclick="navigateTo('account.html')">
                    <div class="action-btn-icon">‚öôÔ∏è</div>
                    <div class="action-btn-text" data-i18n="actionAccountSettings">Account Settings</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Project Details Modal -->
    <div id="projectDetailsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-i18n="modalTitle">Project Details</h2>
                <button class="close-btn" onclick="closeProjectModal()">&times;</button>
            </div>

            <div class="detail-row">
                <div class="detail-label" data-i18n="labelProjectName">Project Name</div>
                <div class="detail-value" id="modalProjectName">-</div>
            </div>

            <div class="detail-row">
                <div class="detail-label" data-i18n="labelDescription">Description</div>
                <div class="detail-value" id="modalDescription">-</div>
            </div>

            <div class="detail-row">
                <div class="detail-label" data-i18n="labelCategory">Category</div>
                <div class="detail-value" id="modalCategory">-</div>
            </div>

            <div class="detail-row">
                <div class="detail-label" data-i18n="labelTemplate">Template</div>
                <div class="detail-value" id="modalTemplate">-</div>
            </div>

            <div class="detail-row">
                <div class="detail-label" data-i18n="labelPrivacy">Privacy Level</div>
                <div class="detail-value" id="modalPrivacy">-</div>
            </div>

            <div class="detail-row">
                <div class="detail-label" data-i18n="labelStartDate">Start Date</div>
                <div class="detail-value" id="modalStartDate">-</div>
            </div>

            <div class="detail-row">
                <div class="detail-label" data-i18n="labelEndDate">End Date</div>
                <div class="detail-value" id="modalEndDate">-</div>
            </div>

            <div class="detail-row">
                <div class="detail-label" data-i18n="labelStatus">Status</div>
                <div class="detail-value">
                    <span class="badge" data-i18n="statusActive">Active</span>
                </div>
            </div>

            <div class="detail-row">
                <div class="detail-label" data-i18n="labelCreated">Created</div>
                <div class="detail-value" id="modalCreatedDate">-</div>
            </div>

            <div class="modal-actions">
                <button class="btn btn-primary" onclick="editProjectFromModal()" data-i18n="btnEditProject">Edit Project</button>
                <button class="btn btn-secondary" onclick="closeProjectModal()" data-i18n="btnClose">Close</button>
            </div>
        </div>
    </div>

    <script>
        let currentLang = localStorage.getItem('lang') || 'en';
        let currentTheme = localStorage.getItem('theme') || 'light';

        function navigateTo(page) {
            window.location.href = page;
        }

        function editProject() {
            localStorage.setItem('isEditingProject', 'true');
            navigateTo('add-project.html');
        }

        function loadDashboardData() {
            // Load user data
            const userName = localStorage.getItem('userName') || 'User';
            const userLastName = localStorage.getItem('userLastName') || '';
            const userInitials = (userName.charAt(0) + userLastName.charAt(0)).toUpperCase();
            const userCompany = localStorage.getItem('userCompany') || 'Your Company';

            document.getElementById('userNameDisplay').textContent = userName;
            document.getElementById('userInitials').textContent = userInitials;

            // Load project data
            const projectName = localStorage.getItem('projectName') || 'My Project';
            const projectCategory = localStorage.getItem('projectCategory') || 'product';
            const projectTemplate = localStorage.getItem('projectTemplate') || 'kanban';
            const projectPrivacy = localStorage.getItem('projectPrivacy') || 'private';

            document.getElementById('displayProjectName').textContent = projectName;
            document.getElementById('displayCategory').textContent = getTranslatedValue('val', projectCategory);
            document.getElementById('displayTemplate').textContent = getTranslatedValue('val', projectTemplate);
            document.getElementById('displayPrivacy').textContent = getTranslatedValue('val', projectPrivacy);

            // Load team data
            const teamData = localStorage.getItem('teamMembers');
            const teamMembers = teamData ? JSON.parse(teamData) : [];
            document.getElementById('teamCount').textContent = teamMembers.length;

            displayTeamMembers(teamMembers);
        }

        function displayTeamMembers(members) {
            const container = document.getElementById('teamMembersList');
            
            if (members.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üòä</div>
                        <div class="empty-state-text">${translations[currentLang].noTeamMembers}</div>
                    </div>
                `;
                return;
            }

            let html = '';
            members.forEach(member => {
                const initials = member.email.split('@')[0].substring(0, 2).toUpperCase();
                html += `
                    <div class="team-member">
                        <div class="team-avatar">${initials}</div>
                        <div class="team-info">
                            <div class="team-name">${member.email}</div>
                            <div class="team-role">${capitalize(member.role)}</div>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        function capitalize(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        function getTranslatedValue(prefix, key) {
            if (!key) return '-';
            const translationKey = prefix + '_' + key;
            if (translations[currentLang] && translations[currentLang][translationKey]) {
                return translations[currentLang][translationKey];
            }
            return capitalize(key);
        }

        function manageTeam() {
            navigateTo('invite-team.html');
        }

        function viewProjectDetails() {
            // Load project data from localStorage
            const projectName = localStorage.getItem('projectName') || 'Untitled Project';
            const projectDescription = localStorage.getItem('projectDescription') || 'No description provided';
            const projectCategory = localStorage.getItem('projectCategory') || 'product';
            const projectTemplate = localStorage.getItem('projectTemplate') || 'kanban';
            const projectPrivacy = localStorage.getItem('projectPrivacy') || 'private';
            const projectStartDate = localStorage.getItem('projectStartDate') || 'Not set';
            const projectEndDate = localStorage.getItem('projectEndDate') || 'Not set';
            const projectCreatedDate = localStorage.getItem('projectCreatedDate') || new Date().toLocaleDateString();

            // Populate modal with data
            document.getElementById('modalProjectName').textContent = projectName;
            document.getElementById('modalDescription').textContent = projectDescription || 'No description provided';
            document.getElementById('modalCategory').textContent = getTranslatedValue('val', projectCategory);
            document.getElementById('modalTemplate').textContent = getTranslatedValue('val', projectTemplate);
            document.getElementById('modalPrivacy').textContent = getTranslatedValue('val', projectPrivacy);
            document.getElementById('modalStartDate').textContent = projectStartDate !== 'Not set' ? new Date(projectStartDate).toLocaleDateString() : 'Not set';
            document.getElementById('modalEndDate').textContent = projectEndDate !== 'Not set' ? new Date(projectEndDate).toLocaleDateString() : 'Not set';
            document.getElementById('modalCreatedDate').textContent = projectCreatedDate;

            // Show modal
            document.getElementById('projectDetailsModal').classList.add('show');
        }

        function closeProjectModal() {
            document.getElementById('projectDetailsModal').classList.remove('show');
        }

        function editProjectFromModal() {
            closeProjectModal();
            editProject();
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            const modal = document.getElementById('projectDetailsModal');
            if (event.target === modal) {
                closeProjectModal();
            }
        }

        // Load data on page load
        document.addEventListener('DOMContentLoaded', function() {
            applyTheme(currentTheme);
            applyLanguage(currentLang);
        });

        // Mobile Menu Toggle
        const mobileBtn = document.querySelector('.mobile-menu-btn');
        const nav = document.querySelector('nav');
        const navLinks = document.querySelectorAll('nav a');

        mobileBtn.addEventListener('click', () => {
            mobileBtn.classList.toggle('active');
            nav.classList.toggle('active');
            document.body.style.overflow = nav.classList.contains('active') ? 'hidden' : '';
        });

        // Close menu when clicking a link
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileBtn.classList.remove('active');
                nav.classList.remove('active');
                document.body.style.overflow = '';
            });
        });

        // Translations
        const translations = {
            en: {
                brandName: "Mo_nassar (Technology Venture‚Äôs)",
                navProjects: "Projects",
                navTeam: "Team",
                navSettings: "Settings",
                navHelp: "Help",
                welcomeTitle: "Welcome to Mo_nassar! üéâ",
                welcomeText: "Your workspace is all set up and ready to go. Start managing your projects with ease.",
                setupComplete: "‚úì Setup Complete - All 4 Steps Finished",
                cardStatus: "Account Status",
                statusActive: "Active",
                statusDetail: "Ready to collaborate",
                cardProject: "Project",
                projectDetail: "Created successfully",
                cardTeam: "Team Members",
                teamDetail: "Ready to invite more",
                projectInfoTitle: "Project Information",
                labelProjectName: "Project Name",
                labelCategory: "Category",
                labelTemplate: "Template",
                labelPrivacy: "Privacy Level",
                btnEditProject: "Edit Project",
                btnViewDetails: "View Details",
                teamMembersTitle: "Team Members",
                noTeamMembers: "No team members invited yet",
                btnManageTeam: "Manage Team",
                btnInviteMembers: "Invite Members",
                quickActionsTitle: "Quick Actions",
                actionCreateProject: "Create New Project",
                actionAddTasks: "Add Tasks",
                actionManageTeam: "Manage Team",
                actionAccountSettings: "Account Settings",
                modalTitle: "Project Details",
                labelDescription: "Description",
                labelStartDate: "Start Date",
                labelEndDate: "End Date",
                labelStatus: "Status",
                labelCreated: "Created",
                btnClose: "Close",
                val_product: "Product Development",
                val_marketing: "Marketing Campaign",
                val_design: "Design Project",
                val_engineering: "Engineering",
                val_event: "Event Planning",
                val_operations: "Operations",
                val_other: "Other",
                val_kanban: "Kanban Board",
                val_timeline: "Timeline/Gantt",
                val_checklist: "Checklist",
                val_private: "Private",
                val_team: "Team",
                val_public: "Public"
            },
            ar: {
                brandName: "Mo_nassar (Technology Venture‚Äôs)",
                navProjects: "ÿßŸÑŸÖÿ¥ÿßÿ±Ÿäÿπ",
                navTeam: "ÿßŸÑŸÅÿ±ŸäŸÇ",
                navSettings: "ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™",
                navHelp: "ŸÖÿ≥ÿßÿπÿØÿ©",
                welcomeTitle: "ÿ£ŸáŸÑÿßŸã ÿ®ŸäŸÉ ŸÅŸä Mo_nassar! üéâ",
                welcomeText: "ŸÖÿ≥ÿßÿ≠ÿ© ÿßŸÑÿπŸÖŸÑ ÿ¨ÿßŸáÿ≤ÿ©. ÿßÿ®ÿØÿ£ ÿ•ÿØÿßÿ±ÿ© ŸÖÿ¥ÿßÿ±ŸäÿπŸÉ ÿ®ÿ≥ŸáŸàŸÑÿ©.",
                setupComplete: "‚úì ÿ™ŸÖ ÿßŸÑÿ•ÿπÿØÿßÿØ - ŸÉŸÑ ÿßŸÑÿÆÿ∑Ÿàÿßÿ™ ÿÆŸÑÿµÿ™",
                cardStatus: "ÿ≠ÿßŸÑÿ© ÿßŸÑÿ≠ÿ≥ÿßÿ®",
                statusActive: "ŸÜÿ¥ÿ∑",
                statusDetail: "ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿ™ÿπÿßŸàŸÜ",
                cardProject: "ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ",
                projectDetail: "ÿ™ŸÖ ÿßŸÑÿ•ŸÜÿ¥ÿßÿ° ÿ®ŸÜÿ¨ÿßÿ≠",
                cardTeam: "ÿ£ÿπÿ∂ÿßÿ° ÿßŸÑŸÅÿ±ŸäŸÇ",
                teamDetail: "ÿ¨ÿßŸáÿ≤ ŸÑÿØÿπŸàÿ© ÿßŸÑŸÖÿ≤ŸäÿØ",
                projectInfoTitle: "ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ",
                labelProjectName: "ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ",
                labelCategory: "ÿßŸÑÿ™ÿµŸÜŸäŸÅ",
                labelTemplate: "ÿßŸÑŸÇÿßŸÑÿ®",
                labelPrivacy: "ÿßŸÑÿÆÿµŸàÿµŸäÿ©",
                btnEditProject: "ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ",
                btnViewDetails: "ÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ",
                teamMembersTitle: "ÿ£ÿπÿ∂ÿßÿ° ÿßŸÑŸÅÿ±ŸäŸÇ",
                noTeamMembers: "ŸÖŸÅŸäÿ¥ ÿ£ÿπÿ∂ÿßÿ° ŸÑÿ≥Ÿá",
                btnManageTeam: "ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÅÿ±ŸäŸÇ",
                btnInviteMembers: "ÿØÿπŸàÿ© ÿ£ÿπÿ∂ÿßÿ°",
                quickActionsTitle: "ÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™ ÿ≥ÿ±Ÿäÿπÿ©",
                actionCreateProject: "ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ¥ÿ±Ÿàÿπ ÿ¨ÿØŸäÿØ",
                actionAddTasks: "ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸáÿßŸÖ",
                actionManageTeam: "ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÅÿ±ŸäŸÇ",
                actionAccountSettings: "ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ®",
                modalTitle: "ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ",
                labelDescription: "ÿßŸÑŸàÿµŸÅ",
                labelStartDate: "ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ®ÿØÿßŸäÿ©",
                labelEndDate: "ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸÜŸáÿßŸäÿ©",
                labelStatus: "ÿßŸÑÿ≠ÿßŸÑÿ©",
                labelCreated: "ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°",
                btnClose: "ÿ•ÿ∫ŸÑÿßŸÇ",
                teamCount: "Ÿ°",
                projectCount: "Ÿ°",
                val_product: "ÿ™ÿ∑ŸàŸäÿ± ŸÖŸÜÿ™ÿ¨",
                val_marketing: "ÿ≠ŸÖŸÑÿ© ÿ™ÿ≥ŸàŸäŸÇ",
                val_design: "ÿ™ÿµŸÖŸäŸÖ",
                val_engineering: "ŸáŸÜÿØÿ≥ÿ©",
                val_event: "ÿ™ÿÆÿ∑Ÿäÿ∑ ÿ≠ÿØÿ´",
                val_operations: "ÿπŸÖŸÑŸäÿßÿ™",
                val_other: "ÿ£ÿÆÿ±Ÿâ",
                val_kanban: "ŸÑŸàÿ≠ÿ© ŸÉÿßŸÜÿ®ÿßŸÜ",
                val_timeline: "ÿ¨ÿØŸàŸÑ ÿ≤ŸÖŸÜŸä",
                val_checklist: "ŸÇÿßÿ¶ŸÖÿ© ŸÖŸáÿßŸÖ",
                val_private: "ÿÆÿßÿµ",
                val_team: "ŸÅÿ±ŸäŸÇ",
                val_public: "ÿπÿßŸÖ"
            }
        };

        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            localStorage.setItem('theme', currentTheme);
            applyTheme(currentTheme);
        }

        function applyTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            document.getElementById('themeBtn').textContent = theme === 'light' ? 'üåô' : '‚òÄÔ∏è';
        }

        async function translateWithGemini() {
            const apiKey = 'YOUR_GEMINI_API_KEY'; // Replace with your actual API key
            
            if (apiKey === 'YOUR_GEMINI_API_KEY') {
                alert('Please configure your Gemini API key in the script to enable AI translation.');
                // Fallback to existing static translation
                currentLang = 'ar';
                localStorage.setItem('lang', currentLang);
                applyLanguage(currentLang);
                return;
            }

            const btn = document.getElementById('langBtn');
            const originalBtnText = btn.textContent;
            btn.textContent = 'Translating...';
            document.body.style.cursor = 'wait';

            try {
                // 1. Scrape all visible text
                const textNodes = [];
                const walker = document.createTreeWalker(
                    document.body,
                    NodeFilter.SHOW_TEXT,
                    {
                        acceptNode: function(node) {
                            if (['SCRIPT', 'STYLE', 'NOSCRIPT'].includes(node.parentElement.tagName)) {
                                return NodeFilter.FILTER_REJECT;
                            }
                            if (node.nodeValue.trim().length === 0) {
                                return NodeFilter.FILTER_REJECT;
                            }
                            return NodeFilter.FILTER_ACCEPT;
                        }
                    }
                );

                let node;
                while (node = walker.nextNode()) {
                    textNodes.push(node);
                }

                // Extract text content
                const textsToTranslate = textNodes.map(n => n.nodeValue.trim());

                // 2. Send to Gemini API
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `You are a professional translator. Translate the following JSON array of English strings to Arabic. Maintain the same order and JSON structure. Do not translate technical IDs or variable names if they look like code. Output ONLY the raw JSON array.\n\n${JSON.stringify(textsToTranslate)}`
                            }]
                        }]
                    })
                });

                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error.message);
                }

                let translatedText = data.candidates[0].content.parts[0].text;
                // Clean markdown formatting if present
                translatedText = translatedText.replace(/```json/g, '').replace(/```/g, '').trim();
                
                const translations = JSON.parse(translatedText);

                // 3. Replace text dynamically
                textNodes.forEach((node, index) => {
                    if (translations[index]) {
                        node.nodeValue = translations[index];
                    }
                });

                // 4. Change document direction
                document.documentElement.dir = 'rtl';
                document.documentElement.lang = 'ar';
                
                // Update state
                currentLang = 'ar';
                localStorage.setItem('lang', 'ar');
                btn.textContent = 'English';

        } catch (error) {
            console.error('Translation failed:', error);
            alert('Translation failed: ' + error.message);
            btn.textContent = originalBtnText;
        } finally {
            document.body.style.cursor = 'default';
        }
    }

        function toggleLanguage() {
            if (currentLang === 'en') {
                translateWithGemini();
            } else {
                localStorage.setItem('lang', 'en');
                location.reload();
            }
        }

        function applyLanguage(lang) {
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
            document.getElementById('langBtn').textContent = lang === 'en' ? 'ÿπÿ±ÿ®Ÿä' : 'English';
            
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });
            
            loadDashboardData();
            convertPageNumbers(lang);
        }

        function convertPageNumbers(lang) {
            const walker = document.createTreeWalker(
                document.body,
                NodeFilter.SHOW_TEXT,
                {
                    acceptNode: function(node) {
                        if (node.parentElement && ['SCRIPT', 'STYLE', 'NOSCRIPT', 'TEXTAREA', 'INPUT'].includes(node.parentElement.tagName)) {
                            return NodeFilter.FILTER_REJECT;
                        }
                        return NodeFilter.FILTER_ACCEPT;
                    }
                }
            );

            let node;
            while (node = walker.nextNode()) {
                if (node.nodeValue.trim() !== '') {
                    if (lang === 'ar') {
                        node.nodeValue = node.nodeValue.replace(/\d/g, d => 'Ÿ†Ÿ°Ÿ¢Ÿ£Ÿ§Ÿ•Ÿ¶ŸßŸ®Ÿ©'[d]);
                    } else {
                        const arDigits = 'Ÿ†Ÿ°Ÿ¢Ÿ£Ÿ§Ÿ•Ÿ¶ŸßŸ®Ÿ©';
                        node.nodeValue = node.nodeValue.replace(/[Ÿ†-Ÿ©]/g, d => arDigits.indexOf(d));
                    }
                }
            }
        }
    </script>
</body>
</html>
